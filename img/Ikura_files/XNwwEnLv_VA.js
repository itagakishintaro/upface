/*!CK:1060047190!*//*1421682760,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Qiq+x"]); }

__d("ComposedBlockType",[],function(a,b,c,d,e,f){e.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8};},null);
__d("ComposedEntityMutability",[],function(a,b,c,d,e,f){e.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null);
__d("ComposedEntityType",[],function(a,b,c,d,e,f){e.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4};},null);
__d("ComposedInlineStyle",[],function(a,b,c,d,e,f){e.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8};},null);
__d("SelectionState",["immutable"],function(a,b,c,d,e,f,g){"use strict";var h=g.Record({anchorKey:null,anchorOffset:null,focusKey:null,focusOffset:null,isBackward:false,hasFocus:false});for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){if(h!==null)h.apply(this,arguments);}k.prototype.serialize=function(){return ('Anchor: '+this.getAnchorKey()+':'+this.getAnchorOffset()+', '+'Focus: '+this.getFocusKey()+':'+this.getFocusOffset()+', '+'Is Backward: '+this.getIsBackward()+', '+'Has Focus: '+this.getHasFocus());};k.prototype.getAnchorKey=function(){return this.anchorKey;};k.prototype.getAnchorOffset=function(){return this.anchorOffset;};k.prototype.getFocusKey=function(){return this.focusKey;};k.prototype.getFocusOffset=function(){return this.focusOffset;};k.prototype.getIsBackward=function(){return this.isBackward;};k.prototype.getHasFocus=function(){return this.hasFocus;};k.prototype.hasEdgeWithin=function(l,m,n){var o=this.getAnchorKey(),p=this.getFocusKey();if(o===p&&o===l){var q=this.getStartOffset(),r=this.getEndOffset();return m<=r&&q<=n;}var s;if(l===o){s=this.getAnchorOffset();}else if(l===p){s=this.getFocusOffset();}else return false;return m<=s&&n>=s;};k.prototype.isCollapsed=function(){return (this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset());};k.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};k.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};k.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};k.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};e.exports=k;},null);
__d("MentionResultsPropTypes",["React","SearchableEntry","SelectionState"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k={viewID:j.string.isRequired,selection:j.instanceOf(i).isRequired,contextComponent:j.object.isRequired,mentionableEntries:j.array.isRequired,highlightedMentionable:j.instanceOf(h),onMentionSelect:j.func.isRequired,onMentionHighlight:j.func.isRequired,onMentionRenderHighlight:j.func.isRequired};e.exports=k;},null);
__d("MentionsLayer.react",["Bootloader","Locale","MentionResultsPropTypes","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.PropTypes,m=false,n=h.isRTL(),o,p,q,r,s=5,t=j.createClass({displayName:"MentionsLayer",propTypes:Object.assign({},i,{typeaheadView:l.func.isRequired,typeaheadViewProps:l.object}),getInitialState:function(){return {bootloaded:m};},componentWillMount:function(){if(!this.state.bootloaded)u(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function(v,w){w.preventDefault();this.props.onMentionSelect(v,w);},shouldComponentUpdate:function(v,w){return (this.state.bootloaded!==w.bootloaded||!k(this.props.mentionableEntries,v.mentionableEntries)||this.props.highlightedMentionable!==v.highlightedMentionable||this.props.characterOffset!==v.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var v=this.props.mentionableEntries,w=this.props.selection,x=(w.isCollapsed()&&w.getHasFocus()&&v&&v.length),y=null,z=this.props.typeaheadViewProps,aa=false,ba=false;if(z&&z.positionAtContext){aa=true;ba=true;}else if(x)y=r(this.props.characterOffset,n);var ca={};if(this.props.autoflip){ca.ContextualLayerAutoFlip=p;ca.ContextualLayerUpdateOnScroll=q;}var da=this.props.typeaheadView;return (j.createElement(o,{shown:x,context:this.props.contextComponent,contextBounds:y,containerWidthMatchContext:ba,offsetY:s,position:"below",behaviors:ca},j.createElement(da,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:v||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function u(v){g.loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(w,x,y,z){o=w;p=x;q=y;r=z;m=true;v();});}e.exports=t;},null);
__d("checkRangeOverlap",["invariant"],function(a,b,c,d,e,f,g){function h(i,j,k,l){g(i<=j&&k<=l);return (i<l&&j>k);}e.exports=h;},null);
__d("getScrollPosition",["getDocumentScrollElement","getUnboundedScrollPosition"],function(a,b,c,d,e,f,g,h){"use strict";function i(j){var k=g();if(j===window)j=k;var l=h(j),m=j===k?document.documentElement:j,n=j.scrollWidth-m.clientWidth,o=j.scrollHeight-m.clientHeight;l.x=Math.max(0,Math.min(l.x,n));l.y=Math.max(0,Math.min(l.y,o));return l;}e.exports=i;},null);
__d("fillArray",[],function(a,b,c,d,e,f){function g(h,i){var j=new Array(h);for(var k=0;k<h;k++)j[k]=i;return j;}e.exports=g;},null);
__d("DocumentCharacters",[],function(a,b,c,d,e,f){var g={BLOCK_DELIMITER:'\u000D',SOFT_NEWLINE:'\u000A',PHOTO:'\ud83d\udcf7',VIDEO:'\ud83d\udcf9'};e.exports=g;},null);
__d("DocumentCommands",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({UNDO:true,REDO:true,DELETE:true,DELETE_WORD:true,BACKSPACE:true,BACKSPACE_WORD:true,BACKSPACE_TO_END_OF_BLOCK:true,BOLD:true,ITALIC:true,UNDERLINE:true,CODE:true,INSERT_BLOCK_DELIMITER:true,TRANSPOSE_CHARACTERS:true,MOVE_SELECTION_TO_START_OF_BLOCK:true,MOVE_SELECTION_TO_END_OF_BLOCK:true,SECONDARY_CUT:true,SECONDARY_PASTE:true});e.exports=h;},null);
__d("DocumentRemovalDirection",[],function(a,b,c,d,e,f){var g={BACKWARD:0,FORWARD:1};e.exports=g;},null);
__d("ContentState",["DocumentCharacters","immutable"],function(a,b,c,d,e,f,g,h){"use strict";var i=g.SOFT_NEWLINE,j=h.Record({blockMap:null,selectionBefore:null,selectionAfter:null});for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(){if(j!==null)j.apply(this,arguments);}m.prototype.getBlockMap=function(){return this.blockMap;};m.prototype.getSelectionBefore=function(){return this.selectionBefore;};m.prototype.getSelectionAfter=function(){return this.selectionAfter;};m.prototype.getBlockForKey=function(n){return this.getBlockMap().get(n);};m.prototype.getKeyBefore=function(n){return this.getBlockMap().reverse().keySeq().skipUntil(function(o){return o===n;}).skip(1).first();};m.prototype.getKeyAfter=function(n){return this.getBlockMap().keySeq().skipUntil(function(o){return o===n;}).skip(1).first();};m.prototype.getBlockAfter=function(n){return this.getBlockMap().skipUntil(function(o,p){return p===n;}).skip(1).first();};m.prototype.getBlockBefore=function(n){return this.getBlockMap().reverse().skipUntil(function(o,p){return p===n;}).skip(1).first();};m.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};m.prototype.getLastBlock=function(){return this.getBlockMap().last();};m.prototype.getPlainText=function(n){return this.getBlockMap().map(function(o){return o.getText();}).join(n||i);};m.prototype.hasText=function(){var n=this.getBlockMap();return (n.size>1||n.first().getLength()>0);};e.exports=m;},null);
__d("createEmptySelectionState",["SelectionState"],function(a,b,c,d,e,f,g){"use strict";function h(i){return new g({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:false,hasFocus:false});}e.exports=h;},null);
__d("createOrderedMapFromBlockArray",["immutable"],function(a,b,c,d,e,f,g){function h(i){return g.OrderedMap(g.Seq(i).toKeyedSeq().mapKeys(function(j,k){return k.getKey();}));}e.exports=h;},null);
__d("createContentStateFromBlocks",["ContentState","createEmptySelectionState","createOrderedMapFromBlockArray"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k){var l=i(k),m=h(l.first().getKey());return new g({blockMap:l,selectionBefore:m,selectionAfter:m});}e.exports=j;},null);
__d("findRangesImmutable",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(!h.size)return;var l=0;h.reduce(function(m,n,o){if(!i(m,n)){if(j(m))k(l,o);l=o;}return n;});j(h.last())&&k(l,h.count());}e.exports=g;},null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=g.List,k=h.thatReturnsTrue,l='-',m=g.Record({start:null,end:null}),n=g.Record({start:null,end:null,decoratorKey:null,leaves:null}),o={generate:function(r,s){var t=r.getText().length;if(!t)return j.of(new n({start:0,end:0,decoratorKey:null,leaves:j.of(new m({start:0,end:0}))}));var u=[],v=s?s.getDecorations(r):g.List(g.Repeat(null,t)),w=r.getCharacterList();i(v,q,k,function(x,y){u.push(new n({start:x,end:y,decoratorKey:v.get(x),leaves:p(w.slice(x,y),x)}));});return j(u);},getFingerprint:function(r){return r.map(function(s){var t=s.get('decoratorKey'),u=t!==null?t+'.'+(s.get('end')-s.get('start')):'';return ''+u+'.'+s.get('leaves').size;}).join(l);}};function p(r,s){var t=[],u=r.map(function(v){return v.getStyle();});i(u,q,k,function(v,w){t.push(new m({start:v+s,end:w+s}));});return j(t);}function q(r,s){return r===s;}e.exports=o;},null);
__d("EditorChangeType",["keyMirror"],function(a,b,c,d,e,f,g){"use strict";var h=g({UNDO:true,REDO:true,CHANGE_SELECTION:true,INSERT_CHARACTERS:true,BACKSPACE_CHARACTER:true,DELETE_CHARACTER:true,REMOVE_RANGE:true,SPLIT_BLOCK:true,INSERT_FRAGMENT:true,CHANGE_INLINE_STYLE:true,CHANGE_BLOCK_TYPE:true,APPLY_ENTITY:true,RESET_BLOCK:true});e.exports=h;},null);
__d("EditorState",["BlockTree","ComposedInlineStyle","EditorChangeType","immutable","SelectionState"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=j.Record({allowUndo:true,currentContent:null,decorator:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:null,selection:null,treeMap:null,undoStack:null});m.create=function(u){u.treeMap=o(u.currentContent,u.decorator);return new m(new l(u));};m.set=function(u,v){var w=u.getImmutable().withMutations(function(x){var y=x.get('decorator'),z=y;if(v.decorator===null){z=null;}else if(v.decorator)z=v.decorator;var aa=v.currentContent||u.getCurrentContent();if(z!==y){x.merge({treeMap:o(aa,z),nativelyRenderedContent:null});return;}var ba=u.getCurrentContent();if(aa!==ba)x.set('treeMap',p(u,aa.getBlockMap(),z));x.merge(v);});return new m(w);};m.prototype.toJS=function(){return this.getImmutable().toJS();};m.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};m.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};m.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};m.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};m.prototype.getSelection=function(){return this.getImmutable().get('selection');};m.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};m.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};m.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};m.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};m.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};m.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};m.prototype.getCurrentInlineStyle=function(){var u=this.getInlineStyleOverride();if(u!=null)return u;var v=this.getCurrentContent(),w=this.getSelection();if(w.isCollapsed())return r(v,w);return s(v,w);};m.prototype.getBlockTree=function(u){return this.getImmutable().getIn(['treeMap',u]);};m.prototype.isAtDocumentStart=function(){var u=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(u,0,0);};m.prototype.isAtDocumentEnd=function(){var u=this.getCurrentContent(),v=u.getBlockMap(),w=v.last(),x=w.getLength();return this.getSelection().hasEdgeWithin(w.getKey(),x,x);};m.acceptSelection=function(u,v){return n(u,v,false);};m.forceSelection=function(u,v){if(!v.getHasFocus())v=v.set('hasFocus',true);return n(u,v,true);};m.moveSelectionToEnd=function(u){var v=u.getCurrentContent(),w=v.getLastBlock(),x=w.getKey(),y=w.getLength();return m.acceptSelection(u,new k({anchorKey:x,anchorOffset:y,focusKey:x,focusOffset:y,isBackward:false}));};m.moveFocusToEnd=function(u){var v=m.moveSelectionToEnd(u);return m.forceSelection(v,v.getSelection());};m.push=function(u,v,w){if(u.getCurrentContent()===v)return u;var x=w!==i.INSERT_CHARACTERS;if(!u.getAllowUndo())return m.set(u,{currentContent:v,lastChangeType:w,selection:v.getSelectionAfter(),forceSelection:x,inlineStyleOverride:null});var y=u.getSelection(),z=u.getCurrentContent(),aa=u.getUndoStack(),ba=v;if(y!==z.getSelectionAfter()||q(u,w)){aa=aa.push(z);ba=ba.set('selectionBefore',y);}else if(w===i.INSERT_CHARACTERS||w===i.BACKSPACE_CHARACTER||w===i.DELETE_CHARACTER)ba=ba.set('selectionBefore',z.getSelectionBefore());return m.set(u,{currentContent:ba,undoStack:aa,redoStack:j.Stack(),lastChangeType:w,selection:v.getSelectionAfter(),forceSelection:x,inlineStyleOverride:null});};m.undo=function(u){if(!u.getAllowUndo())return u;var v=u.getUndoStack(),w=v.peek();if(!w)return u;var x=u.getCurrentContent();return m.set(u,{currentContent:w,undoStack:v.shift(),redoStack:u.getRedoStack().push(x),forceSelection:true,inlineStyleOverride:null,lastChangeType:i.UNDO,nativelyRenderedContent:null,selection:x.getSelectionBefore()});};m.redo=function(u){if(!u.getAllowUndo())return u;var v=u.getRedoStack(),w=v.peek();if(!w)return u;var x=u.getCurrentContent();return m.set(u,{currentContent:w,undoStack:u.getUndoStack().push(x),redoStack:v.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:i.REDO,nativelyRenderedContent:null,selection:w.getSelectionAfter()});};function m(u){this.$EditorState0=u;}m.prototype.getImmutable=function(){return this.$EditorState0;};function n(u,v,w){return m.set(u,{selection:v,forceSelection:w,nativelyRenderedContent:null,inlineStyleOverride:null});}function o(u,v){return u.getBlockMap().map(function(w){return g.generate(w,v);});}function p(u,v,w){var x=u.getCurrentContent().getBlockMap(),y=u.getImmutable().get('treeMap');return y.merge(v.filter(function(z,aa){return z!==x.get(aa);}).map(function(z){return g.generate(z,w);}));}function q(u,v){var w=u.getLastChangeType();return (v!==w||(v!==i.INSERT_CHARACTERS&&v!==i.BACKSPACE_CHARACTER&&v!==i.DELETE_CHARACTER));}function r(u,v){var w=v.getStartKey(),x=v.getStartOffset(),y=u.getBlockForKey(w);if(x>0)return y.getInlineStyleAt(x-1);if(y.getLength())return y.getInlineStyleAt(0);return t(u,w);}function s(u,v){var w=v.getStartKey(),x=v.getStartOffset(),y=u.getBlockForKey(w);if(x<y.getLength())return y.getInlineStyleAt(x);if(x>0)return y.getInlineStyleAt(x-1);return t(u,w);}function t(u,v){var w=u.getBlockBefore(v),x;while(w){x=w.getLength();if(x)return w.getInlineStyleAt(x-1);w=u.getBlockBefore(w.getKey());}return h.NONE;}e.exports=m;},null);
__d("createInitialEditorState",["EditorState","immutable","createEmptySelectionState"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k,l){var m=k.getBlockMap().first().getKey();return g.create({currentContent:k,undoStack:h.Stack(),redoStack:h.Stack(),decorator:l||null,selection:i(m)});}e.exports=j;},null);
__d("CharacterMetadata",["ComposedInlineStyle","immutable"],function(a,b,c,d,e,f,g,h){var i=g,j=i.NONE,k=h.Record({style:j,entity:null});for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(){"use strict";if(k!==null)k.apply(this,arguments);}n.prototype.getStyle=function(){"use strict";return this.get('style');};n.prototype.getEntity=function(){"use strict";return this.get('entity');};n.prototype.hasStyle=function(p){"use strict";return !!(this.getStyle()&p);};n.applyStyle=function(p,q){"use strict";return p.set('style',p.getStyle()|q);};n.removeStyle=function(p,q){"use strict";var r=p.set('style',p.getStyle()&(~q));return h.is(r,o)?o:r;};n.applyEntity=function(p,q){"use strict";var r=p.getEntity()===q?p:p.set('entity',q);return h.is(r,o)?o:r;};var o=new n();n.EMPTY=o;e.exports=n;},null);
__d("ContentBlock",["ComposedBlockType","ComposedInlineStyle","immutable","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=g.UNSTYLED,l=h.NONE,m=i.Record({key:null,type:k,text:'',characterList:i.List()});for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(){if(m!==null)m.apply(this,arguments);}p.prototype.getKey=function(){return this.get('key');};p.prototype.getType=function(){return this.get('type');};p.prototype.getText=function(){return this.get('text');};p.prototype.getCharacterList=function(){return this.get('characterList');};p.prototype.getLength=function(){return this.getText().length;};p.prototype.getInlineStyleAt=function(s){var t=this.getCharacterList().get(s);return t?t.getStyle():l;};p.prototype.getEntityAt=function(s){var t=this.getCharacterList().get(s);return t?t.getEntity():null;};p.prototype.findStyleRanges=function(s,t){j(this.getCharacterList(),q,s,t);};p.prototype.findEntityRanges=function(s,t){j(this.getCharacterList(),r,s,t);};p.prototype.getInlineStyles=function(){return this.getCharacterList().map(function(s){return s.getStyle();});};p.prototype.getEntities=function(){return this.getCharacterList().map(function(s){return s.getEntity();});};function q(s,t){return s.getStyle()===t.getStyle();}function r(s,t){return s.getEntity()===t.getEntity();}e.exports=p;},null);
__d("generateBlockKey",[],function(a,b,c,d,e,f){var g={},h=Math.pow(2,24);function i(){var j;while(j===(void 0)||g.hasOwnProperty(j)||!isNaN(+j))j=Math.floor(Math.random()*h).toString(32);g[j]=true;return j;}e.exports=i;},null);
__d("createPlainBlocksFromText",["CharacterMetadata","ComposedBlockType","ContentBlock","immutable","generateBlockKey"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){return m.map(function(n){var o=n.length;return new i({key:k(),text:n,type:h.UNSTYLED,characterList:j.List(j.Repeat(g.EMPTY,o))});});}e.exports=l;},null);
__d("DocumentCompositeDecorator.Experimental",["immutable","fillArray"],function(a,b,c,d,e,f,g,h){var i='.';function j(m){"use strict";this.$DocumentCompositeDecorator0=m.slice();}j.prototype.getDecorations=function(m){"use strict";var n=h(m.getText().length,null);this.$DocumentCompositeDecorator0.forEach(function(o,p){var q=0,r=o.getStrategy();r(m,function(s,t){if(k(n,s,t)){l(n,s,t,p+i+q);q++;}});});return g.List(n);};j.prototype.getComponentForKey=function(m){"use strict";var n=parseInt(m.split(i),10);return this.$DocumentCompositeDecorator0[n].getComponent();};j.prototype.getPropsForKey=function(m){"use strict";var n=parseInt(m.split(i),10);return this.$DocumentCompositeDecorator0[n].getProps();};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}e.exports=j;},null);
__d("DocumentDecorator",[],function(a,b,c,d,e,f){function g(h,i,j){"use strict";this.$DocumentDecorator0=h;this.$DocumentDecorator1=i;this.$DocumentDecorator2=j||{};}g.prototype.getStrategy=function(){"use strict";return this.$DocumentDecorator0;};g.prototype.getComponent=function(){"use strict";return this.$DocumentDecorator1;};g.prototype.getProps=function(){"use strict";return this.$DocumentDecorator2;};e.exports=g;},null);
__d("DocumentEntityInstance",["ComposedEntityMutability","ComposedEntityType","arrayContains","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(h),m=j(g);function n(o,p,q){"use strict";k(i(l,o));k(i(m,p));this.$DocumentEntityInstance0=o;this.$DocumentEntityInstance1=p;this.$DocumentEntityInstance2=q;}n.prototype.getType=function(){"use strict";return this.$DocumentEntityInstance0;};n.prototype.getMutability=function(){"use strict";return this.$DocumentEntityInstance1;};n.prototype.getData=function(){"use strict";return this.$DocumentEntityInstance2;};n.prototype.replaceData=function(o){"use strict";this.$DocumentEntityInstance2=o;};e.exports=n;},null);
__d("DocumentEntity",["DocumentEntityInstance","invariant"],function(a,b,c,d,e,f,g,h){var i={},j=0,k={create:function(l,m,n){return k.add(new g(l,m,n));},add:function(l){i[++j]=l;return j.toString();},get:function(l){var m=i[l];h(!!m);return m;}};e.exports=k;},null);
__d("getEntityMatcherExperimental",["DocumentEntity"],function(a,b,c,d,e,f,g){function h(i,j){j=j||g.get;return function(k,l){k.findEntityRanges(function(m){var n=m.getEntity();return n!==null&&i(j(n));},l);};}e.exports=h;},null);
__d("DocumentStringKey",[],function(a,b,c,d,e,f){var g={stringify:function(h){return '_'+h;},unstringify:function(h){return h.slice(1);}};e.exports=g;},null);
__d("findRanges",[],function(a,b,c,d,e,f){function g(h,i,j){var k=0,l=0,m;for(var n=0;n<h.length;n++){l++;m=h[n];if(m!==h[n+1]){if(i(m))j(k,l);k=l;}}}e.exports=g;},null);
__d("encodeEntityRanges",["DocumentStringKey","findRanges"],function(a,b,c,d,e,f,g,h){function i(j,k){var l=[];h(j,function(m){return typeof m=='string';},function(m,n){var o=j[m];l.push({offset:m,length:n-m,key:Number(k[g.stringify(o)])});});return l;}e.exports=i;},null);
__d("encodeInlineStyleRanges",["findRanges","getObjectValues","ComposedInlineStyle"],function(a,b,c,d,e,f,g,h,i){var j=[];function k(m,n){var o=[],p=m.map(function(q){return q&n;});g(p,function(q){return !!q;},function(q,r){o.push({offset:q,length:r-q,style:n});});return o;}function l(m){var n=h(i).filter(function(o){return !!o;});return Array.prototype.concat.apply(j,n.map(function(o){return k(m,o);}));}e.exports=l;},null);
__d("encodeBlocksExperimental",["DocumentEntity","DocumentStringKey","encodeEntityRanges","encodeInlineStyleRanges","isEmpty","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n){var o=n.getBlockMap(),p=0,q={},r=[];o.forEach(function(u,v){u.findEntityRanges(function(y){return y.getEntity()!==null;},function(y,z){var aa=h.stringify(u.getEntityAt(y));if(!q.hasOwnProperty(aa))q[aa]=''+(p++);});var w=u.getInlineStyles().toArray(),x=u.getEntities().toArray();r.push({key:v,text:u.getText(),type:u.getType(),inlineStyleRanges:j(w),entityRanges:i(x,q)});});var s=Object.keys(q),t={};s.forEach(function(u,v){var w=g.get(h.unstringify(u)),x=null,y=null,z=w.getData();if(z){x=z.id||null;y=l(z,function(aa){return ''+aa;});delete y.id;}t[v]={id:x,type:w.getType(),data:k(y)?(void 0):y};});return {entityMap:t,blocks:r};}e.exports=m;},null);
__d("getTextAfterNearestEntity",[],function(a,b,c,d,e,f){function g(h,i){var j=i;while(j>0&&h.getEntityAt(j-1)===null)j--;return h.getText().slice(j,i);}e.exports=g;},null);
__d("DocumentEntitySegmentsExperimental",["DocumentRemovalDirection"],function(a,b,c,d,e,f,g){var h=g.FORWARD,i={getRemovalRange:function(j,k,l,m,n){var o=l.split(' ');o=o.map(function(y,z){if(n===h){if(z>0)return ' '+y;}else if(z<o.length-1)return y+' ';return y;});var p=m,q,r,s=null,t=null;for(var u=0;u<o.length;u++){r=o[u];q=p+r.length;if(j<q&&p<k){if(s!==null){t=q;}else{s=p;t=q;}}else if(s!==null)break;p=q;}var v=m+l.length,w=s===m,x=t===v;if((!w&&x)||(w&&!x))if(n===h){if(t!==v)t++;}else if(s!==m)s--;return {start:s,end:t};}};e.exports=i;},null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],function(a,b,c,d,e,f,g,h){"use strict";var i={add:function(k,l,m){return j(k,l,m,true);},remove:function(k,l,m){return j(k,l,m,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h.Map([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?g.applyStyle(z,m):g.removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}e.exports=i;},null);
__d("applyEntityToContentBlock",["CharacterMetadata"],function(a,b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,g.applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}e.exports=h;},null);
__d("applyEntityToContentState",["immutable","applyEntityToContentBlock"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k,l){var m=j.getBlockMap(),n=k.getStartKey(),o=k.getStartOffset(),p=k.getEndKey(),q=k.getEndOffset(),r=m.skipUntil(function(s,t){return t===n;}).takeUntil(function(s,t){return t===p;}).merge(g.OrderedMap([[p,m.get(p)]])).map(function(s,t){var u,v;if(n===p){u=o;v=q;}else{u=t===n?o:0;v=t===p?0:s.getLength();}return h(s,u,v,l);});return j.merge({blockMap:m.merge(r),selectionBefore:k,selectionAfter:k});}e.exports=i;},null);
__d("getRangesForDocumentEntityExperimental",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){var k=[];i.findEntityRanges(function(l){return l.getEntity()===j;},function(l,m){k.push({start:l,end:m});});g(!!k.length);return k;}e.exports=h;},null);
__d("getCharacterRemovalRangeExperimental",["ComposedEntityMutability","DocumentEntity","DocumentEntitySegmentsExperimental","checkRangeOverlap","getRangesForDocumentEntityExperimental","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.MUTABLE,n=g.IMMUTABLE;function o(p,q,r){var s=q.getStartOffset(),t=q.getEndOffset(),u=p.getEntityAt(s);if(!u)return q;var v=h.get(u),w=v.getMutability();if(w===m)return q;var x=k(p,u).filter(function(aa){return j(s,t,aa.start,aa.end);});l(x.length==1);var y=x[0];if(w===n)return q.merge({anchorOffset:y.start,focusOffset:y.end,isBackward:false});var z=i.getRemovalRange(s,t,p.getText().slice(y.start,y.end),y.start,r);return q.merge({anchorOffset:z.start,focusOffset:z.end,isBackward:false});}e.exports=o;},null);
__d("removeEntitiesAtEdges",["CharacterMetadata","ComposedEntityMutability","DocumentEntity","findRangesImmutable","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=h.MUTABLE;function m(p,q){var r=p.getBlockMap(),s={},t=q.getStartKey(),u=q.getStartOffset(),v=r.get(t),w=o(v,u);if(w!==v)s[t]=w;var x=q.getEndKey(),y=q.getEndOffset(),z=r.get(x);if(t===x)z=w;var aa=o(z,y);if(aa!==z)s[x]=aa;if(k(s))return p.set('selectionAfter',q);return p.merge({blockMap:r.merge(s),selectionAfter:q});}function n(p,q,r){var s;j(p,function(t,u){return t.getEntity()===u.getEntity();},function(t){return t.getEntity()===q;},function(t,u){if(t<=r&&u>=r)s={start:t,end:u};});return s;}function o(p,q){var r=p.getCharacterList(),s=q>0?r.get(q-1):undefined,t=q<r.count()?r.get(q):undefined,u=s?s.getEntity():undefined,v=t?t.getEntity():undefined;if(v&&v===u){var w=i.get(v);if(w.getMutability()!==l){var x=n(r,v,q),y=x.start,z=x.end,aa;while(y<z){aa=r.get(y);r=r.set(y,g.applyEntity(aa,null));y++;}return p.set('characterList',r);}}return p;}e.exports=m;},null);
__d("getContentStateFragment",["generateBlockKey","removeEntitiesAtEdges"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k){var l=k.getStartKey(),m=k.getStartOffset(),n=k.getEndKey(),o=k.getEndOffset(),p=h(j,k),q=p.getBlockMap(),r=q.keySeq(),s=r.indexOf(l),t=r.indexOf(n)+1;return q.slice(s,t).map(function(u,v){var w=g(),x=u.getText(),y=u.getCharacterList();if(l===n)return u.merge({key:w,text:x.slice(m,o),characterList:y.slice(m,o)});if(v===l)return u.merge({key:w,text:x.slice(m),characterList:y.slice(m)});if(v===n)return u.merge({key:w,text:x.slice(0,o),characterList:y.slice(0,o)});return u.set('key',w);});}e.exports=i;},null);
__d("insertIntoList",[],function(a,b,c,d,e,f){"use strict";function g(h,i,j){if(j===h.count()){i.forEach(function(k){h=h.push(k);});}else if(j===0){i.reverse().forEach(function(k){h=h.unshift(k);});}else h=h.slice(0,j).concat(i,h.slice(j));return h;}e.exports=g;},null);
__d("insertFragmentIntoContentState",["createOrderedMapFromBlockArray","generateBlockKey","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(l,m,n){j(m.isCollapsed());var o=m.getStartKey(),p=m.getStartOffset(),q=l.getBlockMap(),r=n.size,s,t;if(r===1){var u=q.get(o),v=n.first(),w=u.getText(),x=u.getCharacterList(),y=u.merge({text:(w.slice(0,p)+v.getText()+w.slice(p)),characterList:i(x,v.getCharacterList(),p)});q=q.set(o,y);s=o;t=p+v.getText().length;return l.merge({blockMap:q.set(o,y),selectionBefore:m,selectionAfter:m.merge({anchorKey:s,anchorOffset:t,focusKey:s,focusOffset:t,isBackward:false})});}var z=[];l.getBlockMap().forEach(function(aa,ba){if(ba!==o){z.push(aa);return;}var ca=aa.getText(),da=aa.getCharacterList(),ea=ca.length,fa=ca.slice(0,p),ga=da.slice(0,p),ha=n.first(),ia=aa.merge({text:fa+ha.getText(),characterList:ga.concat(ha.getCharacterList())});z.push(ia);n.slice(1,r-1).forEach(function(na){z.push(na.set('key',h()));});var ja=ca.slice(p,ea),ka=da.slice(p,ea),la=n.last();s=h();var ma=la.merge({key:s,text:la.getText()+ja,characterList:la.getCharacterList().concat(ka)});z.push(ma);});t=n.last().getLength();return l.merge({blockMap:g(z),selectionBefore:m,selectionAfter:m.merge({anchorKey:s,anchorOffset:t,focusKey:s,focusOffset:t,isBackward:false})});}e.exports=k;},null);
__d("insertTextIntoContentState",["immutable","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k,l,m,n){i(l.isCollapsed());var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:(t.slice(0,r)+m+t.slice(r,s.getLength())),characterList:h(s.getCharacterList(),g.Repeat(n,o),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})});}e.exports=j;},null);
__d("removeRangeFromContentState",["immutable"],function(a,b,c,d,e,f,g){"use strict";function h(j,k){if(k.isCollapsed())return j;var l=j.getBlockMap(),m=k.getStartKey(),n=k.getStartOffset(),o=k.getEndKey(),p=k.getEndOffset(),q=l.get(m),r=l.get(o),s;if(q===r){s=i(q.getCharacterList(),n,p);}else s=q.getCharacterList().slice(0,n).concat(r.getCharacterList().slice(p));var t=q.merge({text:(q.getText().slice(0,n)+r.getText().slice(p)),characterList:s}),u=l.toSeq().skipUntil(function(v,w){return w===m;}).takeUntil(function(v,w){return w===o;}).concat(g.Map([[o,null]])).map(function(v,w){return w===m?t:null;});l=l.merge(u).filter(function(v){return !!v;});return j.merge({blockMap:l,selectionBefore:k,selectionAfter:k.merge({anchorKey:m,anchorOffset:n,focusKey:m,focusOffset:n,isBackward:false})});}function i(j,k,l){if(k===0){while(k<l){j=j.shift();k++;}}else if(l===j.count()){while(l>k){j=j.pop();l--;}}else j=j.slice(0,k).concat(j.slice(l));return j;}e.exports=h;},null);
__d("setBlockTypeForContentState",["immutable"],function(a,b,c,d,e,f,g){"use strict";function h(i,j,k){var l=j.getStartKey(),m=j.getEndKey(),n=i.getBlockMap(),o=n.toSeq().skipUntil(function(p,q){return q===l;}).takeUntil(function(p,q){return q===m;}).concat(g.Map([[m,n.get(m)]])).map(function(p){return p.set('type',k);});return i.merge({blockMap:n.merge(o),selectionBefore:j,selectionAfter:j});}e.exports=h;},null);
__d("splitBlockInContentState",["generateBlockKey","invariant"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k){h(k.isCollapsed());var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getCharacterList(),r=o.merge({text:p.slice(0,m),characterList:q.slice(0,m)}),s=g(),t=r.merge({key:s,text:p.slice(m),characterList:q.slice(m)}),u=n.toSeq().takeUntil(function(x){return x===o;}),v=n.toSeq().skipUntil(function(x){return x===o;}).rest(),w=u.concat([[r.getKey(),r],[t.getKey(),t]],v).toOrderedMap();return j.merge({blockMap:w,selectionBefore:k,selectionAfter:k.merge({anchorKey:s,anchorOffset:0,focusKey:s,focusOffset:0,isBackward:false})});}e.exports=i;},null);
__d("DocumentModifierExperimental",["CharacterMetadata","ComposedInlineStyle","ContentStateInlineStyle","DocumentRemovalDirection","applyEntityToContentState","getCharacterRemovalRangeExperimental","getContentStateFragment","insertFragmentIntoContentState","insertTextIntoContentState","invariant","removeEntitiesAtEdges","removeRangeFromContentState","setBlockTypeForContentState","splitBlockInContentState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=h.NONE,v={replaceText:function(w,x,y,z,aa){if(z===(void 0))z=u;if(aa===(void 0))aa=null;var ba=q(w,x),ca=r(ba,x),da;if(z===u&&aa===null){da=g.EMPTY;}else da=new g({style:z,entity:aa});return o(ca,ca.getSelectionAfter(),y,da);},insertText:function(w,x,y,z,aa){p(x.isCollapsed());if(z===(void 0))z=u;if(aa===(void 0))aa=null;var ba;if(z===u&&aa===null){ba=g.EMPTY;}else ba=new g({style:z,entity:aa});var ca=q(w,x);return o(ca,ca.getSelectionAfter(),y,ba);},moveText:function(w,x,y){var z=m(w,x),aa=v.removeRange(w,x,j.BACKWARD);return v.replaceWithFragment(aa,y,z);},replaceWithFragment:function(w,x,y){var z=q(w,x),aa=r(z,x);return n(aa,aa.getSelectionAfter(),y);},removeRange:function(w,x,y){if(x.getAnchorKey()===x.getFocusKey()){var z=x.getAnchorKey(),aa=x.getStartOffset(),ba=x.getEndOffset(),ca=w.getBlockForKey(z),da=ca.getEntityAt(aa),ea=ca.getEntityAt(ba-1);if(da&&da===ea){var fa=l(ca,x,y);return r(w,fa);}}var ga=q(w,x);return r(ga,x);},splitBlock:function(w,x){var y=q(w,x),z=r(y,x);return t(z,z.getSelectionAfter());},applyInlineStyle:function(w,x,y){return i.add(w,x,y);},removeInlineStyle:function(w,x,y){return i.remove(w,x,y);},setBlockType:function(w,x,y){return s(w,x,y);},applyEntity:function(w,x,y){var z=q(w,x);return k(z,x,y);}};e.exports=v;},null);
__d("DocumentRemovableWord",["TokenizeUtil"],function(a,b,c,d,e,f,g){var h=g.getPunctuation();h=h.replace("\'","").slice(1,-1);var i='\\s'+h,j='^('+'['+i+']*'+'[^'+i+']+'+'|['+i+']+'+')',k=new RegExp(j),l='('+'[^'+i+']+'+'['+i+']*'+'|['+i+']+'+')$',m=new RegExp(l);function n(p,q){var r=q?m.exec(p):k.exec(p);return r?r[0]:null;}var o={getBackward:function(p){return n(p,true);},getForward:function(p){return n(p,false);}};e.exports=o;},null);
__d("getTextContentFromFiles",["DocumentCharacters"],function(a,b,c,d,e,f,g){var h=g.BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true};function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r);if(o==m.length)n(p.join(h));});});}function l(m,n){if(!a.FileReader||(m.type&&!(m.type in j))){n('');return;}if(m.type===''&&i.test(m.name)){n(m.name.replace(i,''));return;}var o=new FileReader();o.onload=function(){n(o.result);};o.onerror=function(){n('');};o.readAsText(m);}e.exports=k;},null);
__d("DocumentOffsetKey",[],function(a,b,c,d,e,f){var g='-',h={encode:function(i,j,k){return i+g+j+g+k;},decode:function(i){var j=i.split(g),k=j[0],l=j[1],m=j[2];return {blockKey:k,decoratorKey:parseInt(l,10),leafKey:parseInt(m,10)};}};e.exports=h;},null);
__d("TextEditorBanzai",["BanzaiScuba","encodeBlocksExperimental"],function(a,b,c,d,e,f,g,h){var i=3,j={logSetSelectionError:function(n,o){var p=m();p.addNormal('error_type','setSelection');var q=o,r=q[0],s=q[1],t=q[2],u=q[3],v=q[4];p.addNormal('selection_state',r.serialize());var w=k(s);p.addNormal('node_html',w);p.addNormal('selection_params','Key: '+t+', Start: '+u+', End: '+v);p.addNormal('error_text',n.message);p.post();},logGetSelectionError:function(n,o){var p=m();p.addNormal('error_type','getSelection');var q=o,r=q[0],s=q[1],t=r.getCurrentContent(),u=h(t),v=u.blocks;v.forEach(function(y){y.length=y.text.length;delete y.text;});var w=r.getSelection();p.addNormal('content_state',JSON.stringify(v));p.addNormal('selection_state',w.serialize());p.addNormal('error_text',n.message);var x=k(s);p.addNormal('node_html',x);p.post();}};function k(n){if(!n)return '[empty]';var o=l(n);return o.nodeType===i?o.textContent:o.innerHTML;}function l(n){if(n.nodeType===i){var o=n.textContent.length;return document.createTextNode('[text '+o+']');}var p=n.cloneNode(),q=n.childNodes;for(var r=0;r<q.length;r++)p.appendChild(l(q[r]));return p;}function m(){return new g('text_editor_error_log',null,{addBrowserFields:true});}e.exports=j;},null);
__d("getSelectionOffsetKeyForNode",[],function(a,b,c,d,e,f){function g(h){return h.getAttribute&&h.getAttribute('data-offset-key');}e.exports=g;},null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],function(a,b,c,d,e,f,g){function h(i){while(i&&i!==document.documentElement){var j=g(i);if(j!=null)return j;i=i.parentNode;}return null;}e.exports=h;},null);
__d("getUpdatedSelectionState",["DocumentOffsetKey"],function(a,b,c,d,e,f,g){function h(i,j,k,l,m){var n=i.getSelection(),o=g.decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=g.decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=(n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x);if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}e.exports=h;},null);
__d("getDocumentSelectionExperimental",["DocumentCharacters","ErrorUtils","TextEditorBanzai","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.SOFT_NEWLINE;function o(u,v){var w=[u,v];return h.applyWithGuard(p,null,w,function(x){return i.logGetSelectionError(x,w);},'TextEditor:getSelection');}function p(u,v){var w=a.getSelection();if(w.rangeCount===0)return {selectionState:u.getSelection().set('hasFocus',false),needsRecovery:false};var x=w.anchorNode,y=w.focusNode,z=w.anchorOffset,aa=w.focusOffset,ba=x.nodeType===Node.TEXT_NODE,ca=y.nodeType===Node.TEXT_NODE;if(ba&&ca)return {selectionState:l(u,j(x),z,j(y),aa),needsRecovery:false};var da=null,ea=null;if(ba){da={key:j(x),offset:z};ea=s(v,y,aa);}else if(ca){ea={key:j(y),offset:aa};da=s(v,x,z);}else{da=s(v,x,z);ea=s(v,y,aa);}return {selectionState:l(u,da.key,da.offset,ea.key,ea.offset),needsRecovery:true};}function q(u){while(u.firstChild&&k(u.firstChild))u=u.firstChild;return u;}function r(u){while(u.lastChild&&k(u.lastChild))u=u.lastChild;return u;}function s(u,v,w){var x=j(v);m(x!=null||u===v);if(w===0)return {key:x||k(q(v)),offset:0};var y=v.childNodes[w-1],z,aa;if(!k(y)){z=x;aa=t(y);}else{var ba=r(y);z=k(ba);aa=t(ba);}return {key:z,offset:aa};}function t(u){var v=u.textContent;return v===n?0:v.length;}e.exports=o;},null);
__d("isSelectionAtLeafStartExperimental",[],function(a,b,c,d,e,f){"use strict";function g(h){var i=h.getSelection(),j=i.getAnchorKey(),k=h.getBlockTree(j),l=i.getStartOffset(),m=false;k.some(function(n){if(l===n.get('start')){m=true;return true;}if(l<n.get('end'))return n.get('leaves').some(function(o){var p=o.get('start');if(l===p){m=true;return true;}if(l<p)return false;});});return m;}e.exports=g;},null);
__d("setDocumentSelectionExperimental",["ErrorUtils","TextEditorBanzai","containsNode"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(n,o,p,q,r){var s=[n,o,p,q,r];return g.applyWithGuard(k,null,s,function(t){return h.logSetSelectionError(t,s);},'TextEditor:setSelection');}function k(n,o,p,q,r){if(!i(document.documentElement,o))return;var s=a.getSelection(),t=n.getAnchorKey(),u=n.getAnchorOffset(),v=n.getFocusKey(),w=n.getFocusOffset(),x=n.getIsBackward();if(!s.extend&&x){var y=t,z=u;t=v;u=w;v=y;w=z;x=false;}var aa=(t===p&&q<=u&&r>=u),ba=(v===p&&q<=w&&r>=w);if(aa&&ba){s.removeAllRanges();m(s,o,u-q);l(s,o,w-q);return;}if(!x){if(aa){s.removeAllRanges();m(s,o,u-q);}if(ba)l(s,o,w-q);}else{if(ba){s.removeAllRanges();m(s,o,w-q);}if(aa){var ca=s.focusNode,da=s.focusOffset;s.removeAllRanges();m(s,o,u-q);l(s,ca,da);}}}function l(n,o,p){if(n.extend){n.extend(o,p);}else{var q=n.getRangeAt(0);q.setEnd(o,p);n.addRange(q.cloneRange());}}function m(n,o,p){var q=document.createRange();q.setStart(o,p);n.addRange(q);}e.exports=j;},null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","ComposedEntityMutability","ComposedEntityType","DocumentEntity","EmoticonsList","immutable"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=l,n=m.List,o='\u3000';function p(q,r,s){if(!k.emotes[r])return q;var t=j.create(i.EMOTICON,h.IMMUTABLE,{type:k.emotes[r],originalEmoticon:r}),u=q.getText(),v=q.getCharacterList(),w=r.length,x=v.get(s);return q.merge({text:(u.slice(0,s)+o+u.slice(s+w)),characterList:v.slice(0,s).concat(n.of(g.applyEntity(x,t)),v.slice(s+w))});}e.exports=p;},null);
__d("applyEmoticonToContentState",["EmoticonsList","applyEmoticonToContentBlock","getTextAfterNearestEntity"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=new RegExp(g.regexp.source,'g');function k(l,m){var n=m.getAnchorKey(),o=m.getAnchorOffset(),p=l.getBlockForKey(n),q=i(p,o),r,s;while(s!==null){s=j.exec(q);if(s!==null)r=s;}if(!r)return l;var t=r[1];if(!t&&o!==q.length)return l;var u=r[2],v=o-q.length,w=v+r.index+r[1].length,x=l.getBlockMap().set(n,h(p,u,w));o-=(u.length-1);return l.merge({blockMap:x,selectionBefore:m,selectionAfter:m.merge({anchorOffset:o,focusOffset:o})});}e.exports=k;},null);
__d("insertEmoticonIntoContentState",["DocumentModifierExperimental","applyEmoticonToContentBlock"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k,l){var m=g.replaceText(k,l,j),n=l.getAnchorKey(),o=l.getAnchorOffset(),p=m.getBlockForKey(n),q=m.getBlockMap().set(n,h(p,j,o));o++;return k.merge({blockMap:q,selectionBefore:l,selectionAfter:l.merge({anchorOffset:o,focusOffset:o})});}e.exports=i;},null);
__d("AbstractTextEditorPlaceholder.Experimental.react",["EditorState","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.PropTypes,k=h.createClass({displayName:"AbstractTextEditorPlaceholder",propTypes:{editorState:j.instanceOf(g).isRequired,text:j.string.isRequired},shouldComponentUpdate:function(l,m){if(this.props.text!==l.text)return true;var n=this.props.editorState,o=l.editorState,p=n.getSelection(),q=o.getSelection();return (p.getHasFocus()!==q.getHasFocus());},render:function(){var l=this.props.editorState.getSelection().getHasFocus(),m=(("_5ywb")+(l?' '+"_5ywc":''));return (h.createElement("div",{className:m},h.createElement("div",{className:"_3br6"},this.props.text)));}});e.exports=k;},null);
__d("getDefaultKeyBinding",["DocumentCommands","Keys","UserAgent"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=i.isPlatform('Mac OS X'),k=i.isPlatform('Windows'),l=i.isBrowser('Firefox'),m=j&&l&&l<29;function n(u){return u.ctrlKey&&!u.altKey;}function o(u){return j?(u.metaKey&&!u.altKey):n(u);}function p(u){return (j&&u.altKey)||n(u);}function q(u){if(o(u))return u.shiftKey?g.REDO:g.UNDO;}function r(u){if(k&&u.shiftKey)return null;return p(u)?g.DELETE_WORD:g.DELETE;}function s(u){if(o(u)&&j)return g.BACKSPACE_TO_END_OF_BLOCK;return p(u)?g.BACKSPACE_WORD:g.BACKSPACE;}function t(u){switch(u.keyCode){case 66:return o(u)?g.BOLD:null;case 68:return n(u)?g.DELETE:null;case 72:return n(u)?g.BACKSPACE:null;case 73:return o(u)?g.ITALIC:null;case 74:return o(u)?g.CODE:null;case 75:if(!k&&n(u))return g.SECONDARY_CUT;return null;case 79:return n(u)?g.INSERT_BLOCK_DELIMITER:null;case 84:return j&&n(u)?g.TRANSPOSE_CHARACTERS:null;case 85:if(j&&n(u))return g.BACKSPACE_TO_END_OF_BLOCK;return o(u)?g.UNDERLINE:null;case 87:return j&&n(u)?g.BACKSPACE_WORD:null;case 89:if(n(u))return k?g.REDO:g.SECONDARY_PASTE;return null;case 90:return q(u)||null;case h.DELETE:return r(u);case h.BACKSPACE:return s(u);case h.LEFT:return (m&&o(u)?g.MOVE_SELECTION_TO_START_OF_BLOCK:null);case h.RIGHT:return (m&&o(u)?g.MOVE_SELECTION_TO_END_OF_BLOCK:null);default:return null;}}e.exports=t;},null);
__d("AbstractTextEditorProps.Experimental",["EditorState","React","emptyFunction","getDefaultKeyBinding"],function(a,b,c,d,e,f,g,h,i,j){var k=i.thatReturns(''),l=i.thatReturns(null),m=h.PropTypes,n={propTypes:{editorState:m.instanceOf(g).isRequired,placeholder:m.string,textAlignment:m.oneOf(['left','center','right']),blockRendererFn:m.func,blockStyleFn:m.func,inlineStyleFn:m.func,keyBindingFn:m.func,spellCheck:m.bool,stripPastedStyles:m.bool,handleReturn:m.func,handleKeyCommand:m.func,handleBeforeInput:m.func,handlePastedFiles:m.func,onEscape:m.func,onTab:m.func,onUpArrow:m.func,onDownArrow:m.func,onBlur:m.func,onFocus:m.func},getDefaultProps:function(){return {blockRendererFn:l,blockStyleFn:k,inlineStyleFn:k,keyBindingFn:j,spellCheck:false,stripPastedStyles:false};}};e.exports=n;},null);
__d("ElementForBlockType",["ComposedBlockType"],function(a,b,c,d,e,f,g){var h={getElement:function(i){switch(i){case g.HEADER_ONE:return 'h2';case g.HEADER_TWO:return 'h3';case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'li';case g.BLOCKQUOTE:return 'blockquote';case g.MEDIA:return 'figure';default:return 'div';}},getWrapperElement:function(i){switch(i){case g.UNORDERED_LIST_ITEM:return 'ul';case g.ORDERED_LIST_ITEM:return 'ol';case g.CODE:return 'pre';default:return null;}}};e.exports=h;},null);
__d("TextEditorTextNode.react",["React","UserAgent_DEPRECATED","getTextContentAccessor"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=h.ie()<=11,k=i();function l(p){return j?p[k]==='\n':p.tagName==='BR';}var m=j?g.createElement("span",{key:"A"},'\n'):g.createElement("br",{key:"A"}),n=j?g.createElement("span",{key:"B"},'\n'):g.createElement("br",{key:"B"}),o=g.createClass({displayName:"TextEditorTextNode",shouldComponentUpdate:function(p){var q=this.getDOMNode(),r=p.children==='';if(r)return !l(q);return q[k]!==p.children;},componentWillUpdate:function(){this.forceFlag=!this.forceFlag;},render:function(){if(this.props.children==='')return this.forceFlag?m:n;return g.createElement("span",{key:this.forceFlag?'A':'B'},this.props.children);}});e.exports=o;},null);
__d("TextEditorLeaf.Experimental.react",["DocumentCharacters","React","SelectionState","TextEditorTextNode.react","setDocumentSelectionExperimental"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=h.PropTypes,m=g.SOFT_NEWLINE,n=3,o=h.createClass({displayName:"TextEditorLeaf",propTypes:{selection:l.instanceOf(i),start:l.number.isRequired,blockKey:l.string.isRequired,text:l.string.isRequired,style:l.number,inlineStyleFn:l.func.isRequired,isLast:l.bool.isRequired},_setSelection:function(){var p=this.props.selection;if(p==null||!p.getHasFocus())return;var q=this.props.start,r=q+this.props.text.length,s=this.props.blockKey;if(!p.hasEdgeWithin(s,q,r))return;var t=this.getDOMNode(),u=t.firstChild,v;if(u.nodeType===n){v=u;}else if(u.tagName==='BR'){v=t;}else v=u.firstChild;k(p,v,s,q,r);},shouldComponentUpdate:function(p){return (this.refs.leaf.getDOMNode().textContent!==p.text||p.forceSelection);},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var p=this.props.text;if(p.endsWith(m)&&this.props.isLast)p+=m;var q;if(this.props.style)q=this.props.inlineStyleFn(this.props.style);return (h.createElement("span",{"data-offset-key":this.props.offsetKey,className:q,ref:"leaf"},h.createElement(j,null,p)));}});e.exports=o;},null);
__d("TextEditorBlock.Experimental.react",["ContentBlock","DocumentCompositeDecorator.Experimental","DocumentOffsetKey","ElementForBlockType","React","SelectionState","Style","TextEditorLeaf.Experimental.react","UnicodeBidiDirection","cx","getElementPosition","getScrollPosition","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=k.PropTypes,v=o.LTR,w=o.RTL,x=10,y=k.createClass({displayName:"TextEditorBlock",propTypes:{block:u.instanceOf(g).isRequired,tree:u.object.isRequired,selection:u.instanceOf(l).isRequired,decorator:u.instanceOf(h),forceSelection:u.bool.isRequired,direction:u.string.isRequired,blockProps:u.object,blockStyleFn:u.func.isRequired,inlineStyleFn:u.func.isRequired},shouldComponentUpdate:function(aa){return (this.props.block!==aa.block||this.props.tree!==aa.tree||this.props.direction!==aa.direction||(z(aa.selection,aa.block.getKey())&&aa.forceSelection));},componentDidMount:function(){var aa=this.props.selection,ba=aa.getEndKey();if(!aa.getHasFocus()||ba!==this.props.block.getKey())return;var ca=this.getDOMNode(),da=m.getScrollParent(ca),ea=r(da),fa;if(da===window){var ga=q(ca),ha=ga.y+ga.height,ia=s().height;fa=ha-ia;if(fa>0)window.scrollTo(ea.x,ea.y+fa+x);}else{var ja=ca.offsetHeight+ca.offsetTop,ka=da.offsetHeight+ea.y;fa=ja-ka;if(fa>0)da.scrollTop+=fa+x;}},_renderChildren:function(){var aa=this.props.block,ba=aa.getKey(),ca=aa.getText(),da=this.props.tree.size-1,ea=z(this.props.selection,ba);return this.props.tree.map(function(fa,ga){var ha=fa.get('leaves'),ia=ha.size-1,ja=ha.map(function(oa,pa){var qa=i.encode(ba,ga,pa),ra=oa.get('start'),sa=oa.get('end');return (k.createElement(n,{key:qa,offsetKey:qa,blockKey:ba,start:ra,selection:ea?this.props.selection:null,forceSelection:this.props.forceSelection,text:ca.slice(ra,sa),style:aa.getInlineStyleAt(ra),inlineStyleFn:this.props.inlineStyleFn,isLast:ga===da&&pa===ia}));}.bind(this)).toArray(),ka=fa.get('decoratorKey');if(ka===null)return ja;var la=this.props.decorator.getComponentForKey(ka),ma=this.props.decorator.getPropsForKey(ka),na=i.encode(ba,ga,0);return (k.createElement(la,k.__spread({},ma,{key:na,entityKey:aa.getEntityAt(fa.get('start')),offsetKey:na}),ja));}.bind(this)).toArray();},render:function(){var aa=this.props.block,ba=aa.getKey(),ca=t(this.props.blockStyleFn(aa.getType()),(("_209g")+(this.props.direction===v?' '+"_2vxa":'')+(this.props.direction===w?' '+"_2vxb":''))),da=j.getElement(aa.getType());return (k.createElement(da,k.__spread({style:{position:'relative'},"data-block":"true","data-offset-key":i.encode(ba,0,0),className:ca},this.props.blockProps),this._renderChildren()));}});function z(aa,ba){return (aa.getAnchorKey()===ba||aa.getFocusKey()===ba);}e.exports=y;},null);
__d("TextEditorCompositionHandler.Experimental",["ComposedInlineStyle","DocumentModifierExperimental","EditorChangeType","EditorState","Keys","isSelectionAtLeafStartExperimental"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.NONE,n=20,o={onBeforeInput:function(p){this._textInputData=(this._textInputData||'')+p.data;},onCompositionStart:function(){this._stillComposing=true;},onCompositionEnd:function(p){this._resolved=false;this._stillComposing=false;setTimeout(function(){if(!this._resolved)o.resolveComposition.call(this);}.bind(this),n);},onKeyDown:function(p){if(p.which===k.RIGHT||p.which===k.LEFT)p.preventDefault();},onKeyPress:function(p){if(p.which===k.RETURN)p.preventDefault();},resolveComposition:function(){if(this._stillComposing)return;this._resolved=true;var p=this._textInputData;this._textInputData='';var q=j.set(this.props.editorState,{inCompositionMode:false}),r=!p||l(q);if(r)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(p){var s=h.replaceText(q.getCurrentContent(),q.getSelection(),p,m,null);this.update(j.push(q,s,i.INSERT_CHARACTERS));return;}if(r)this.update(j.set(q,{nativelyRenderedContent:null,forceSelection:true}));}};e.exports=o;},null);
__d("TextEditorModes",[],function(a,b,c,d,e,f){var g={EDIT:0,COMPOSITE:1,DRAG:2,RENDER:3,CUT:4};e.exports=g;},null);
__d("TextEditorPasteHandler",["CharacterMetadata","ComposedBlockType","ComposedInlineStyle","ContentBlock","DocumentCharacters","immutable","arrayContains","fillArray","generateBlockKey","getSafeBodyFromHTML"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=q.UNSTYLED,s=i,t=s.BOLD,u=s.ITALIC,v=s.UNDERLINE,w=s.NONE,x=g,y=x.EMPTY,z=k,aa=z.BLOCK_DELIMITER,ba=z.SOFT_NEWLINE,ca=l,da=ca.List,ea=ca.Repeat,fa='&nbsp;',ga=' ',ha=new RegExp(aa,'g'),ia=new RegExp(ba,'g'),ja=new RegExp(fa,'g'),ka=['p','h1','h2','h3','li','blockquote'],la={strong:t,b:t,em:u,i:u,u:v};function ma(){return {text:'',inlines:[],blocks:[]};}function na(){return {text:ga,inlines:[w],blocks:[]};}function oa(){return {text:ba,inlines:[w],blocks:[]};}function pa(xa){return {text:aa,inlines:[w],blocks:[xa]};}function qa(xa,ya){switch(xa){case 'h1':return h.HEADER_ONE;case 'h2':return h.HEADER_TWO;case 'li':if(ya==='ol')return h.ORDERED_LIST_ITEM;return h.UNORDERED_LIST_ITEM;case 'blockquote':return h.BLOCKQUOTE;case 'pre':return h.CODE;default:return h.UNSTYLED;}}function ra(xa,ya,za){var ab=la[xa];if(ab){za|=ab;}else if(ya.style){za|=ya.style.fontWeight==='bold'?t:0;za|=ya.style.fontStyle==='italic'?u:0;za|=ya.style.textDecoration==='underline'?v:0;}return za;}function sa(xa,ya){if(xa.text.slice(-1)===aa&&ya.text.slice(0,1)===aa){xa.text=xa.text.slice(0,-1);xa.inlines.pop();xa.blocks.pop();}if(xa.text.slice(-1)===aa&&(ya.text===ga||ya.text===ba))return xa;return {text:xa.text+ya.text,inlines:xa.inlines.concat(ya.inlines),blocks:xa.blocks.concat(ya.blocks)};}function ta(xa){return ka.some(function(ya){return xa.indexOf('<'+ya)!==-1;});}function ua(xa,ya,za,ab,bb){var cb=xa.nodeName.toLowerCase(),db=false;if(cb==="#text"){var eb=xa.textContent;if(eb.trim()==='')return na();return {text:eb,inlines:n(eb.length,ya),blocks:[]};}if(cb==="br")return oa();var fb=ma(),gb;ya=ra(cb,xa,ya);if(cb==="ul"||cb==="ol")za=cb;if(!ab&&m(bb,cb)){fb=pa(qa(cb,za));ab=true;db=true;}xa=xa.firstChild;while(xa){gb=ua(xa,ya,za,ab,bb);fb=sa(fb,gb);xa=xa.nextSibling;}if(db)fb=sa(fb,pa(r));return fb;}function va(xa){xa=xa.trim().replace(ha,'').replace(ia,ga).replace(ja,ga);var ya=p(xa);if(!ya)return null;var za=ta(xa)?ka:['div'],ab=ua(ya,w,'ul',false,za);if(ab.text.indexOf(aa)===0)ab={text:ab.text.slice(1),inlines:ab.inlines.slice(1),blocks:ab.blocks};if(ab.text.slice(-1)===aa){ab.text=ab.text.slice(0,-1);ab.inlines=ab.inlines.slice(0,-1);ab.blocks.pop();}if(ab.blocks.length===0)ab.blocks.push(r);if(ab.text.split(aa).length===ab.blocks.length+1)ab.blocks.unshift(r);return ab;}var wa={processHTML:function(xa){return va(xa);},processHTMLAsImmutable:function(xa,ya){var za=va(xa);if(!za)return null;var ab=0;return za.text.split(aa).map(function(bb,cb){var db;if(ya){db=da(ea(y,bb.length));}else{var eb=ab+bb.length;db=da(za.inlines.slice(ab,eb).map(function(fb){return new g({style:fb});}));ab=eb+1;}return new j({key:o(),type:ya?r:za.blocks[cb],text:bb,characterList:db});});},processText:function(xa){return {text:xa,inlines:n(xa.length,w),blocks:n(xa.split(aa).length,r)};},processTextAsImmutable:function(xa){return xa.map(function(ya){return new j({key:o(),type:r,text:ya,characterList:da(ea(y,ya.length))});});}};e.exports=wa;},null);
__d("TextEditorEditHandler.Experimental",["BlockTree","DataTransfer","DocumentCharacters","DocumentCommands","DocumentModifierExperimental","DocumentOffsetKey","DocumentRemovableWord","DocumentRemovalDirection","EditorChangeType","EditorState","Keys","TextEditorModes","TextEditorPasteHandler","UnicodeUtils","UserAgent","areEqual","createOrderedMapFromBlockArray","findAncestorOffsetKey","getActiveElement","getContentStateFragment","getDocumentSelectionExperimental","getTextContentFromFiles","isSelectionAtLeafStartExperimental"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){"use strict";var da=i.SOFT_NEWLINE,ea=u.isEngine('WebKit'),fa=null,ga={onFocus:function(hb){var ib=this.props.editorState,jb=ib.getSelection();if(jb.getHasFocus())return;var kb=jb.set('hasFocus',true);this.props.onFocus&&this.props.onFocus(hb);this.update(p.acceptSelection(ib,kb));},onBlur:function(hb){if(ea&&y()===document.body)a.getSelection().removeAllRanges();var ib=this.props.editorState,jb=ib.getSelection();if(!jb.getHasFocus())return;var kb=jb.set('hasFocus',false);this.props.onBlur&&this.props.onBlur(hb);this.update(p.acceptSelection(ib,kb));},onBeforeInput:function(hb){var ib=hb.data;if(!ib)return;if(this.props.handleBeforeInput&&this.props.handleBeforeInput(ib)){hb.preventDefault();return;}var jb=this.props.editorState,kb=jb.getSelection();if(!kb.isCollapsed()){hb.preventDefault();this.update(ka(jb,ib,jb.getCurrentInlineStyle(),null));return;}var lb=!ca(jb),mb=ka(jb,ib,jb.getCurrentInlineStyle(),null);if(!lb){hb.preventDefault();this.update(mb);return;}var nb=kb.getAnchorKey(),ob=jb.getBlockTree(nb),pb=g.getFingerprint(ob),qb=g.getFingerprint(mb.getBlockTree(nb));if(gb(ib)||pb!==qb){hb.preventDefault();}else mb=p.set(mb,{nativelyRenderedContent:mb.getCurrentContent()});this.update(mb);},onSelect:function(hb){if(this._blockSelectEvents)return;var ib=this.props.editorState,jb=aa(ib,this.refs.editorContainer.getDOMNode().firstChild),kb=jb.selectionState;if(kb!==ib.getSelection()){if(!!jb.needsRecovery){ib=p.forceSelection(ib,kb);}else ib=p.acceptSelection(ib,kb);this.update(ib);}},onKeyDown:function(hb){var ib=hb.which,jb=this.props.editorState;switch(ib){case q.RETURN:hb.preventDefault();if(!this.props.handleReturn||!this.props.handleReturn(hb))this.update(va(jb));return;case q.ESC:hb.preventDefault();this.props.onEscape&&this.props.onEscape(hb);return;case q.TAB:this.props.onTab&&this.props.onTab(hb);return;case q.UP:this.props.onUpArrow&&this.props.onUpArrow(hb);return;case q.DOWN:this.props.onDownArrow&&this.props.onDownArrow(hb);return;}var kb=this.props.keyBindingFn(hb);if(!kb)return;hb.preventDefault();if(this.props.handleKeyCommand&&this.props.handleKeyCommand(kb))return;if(kb===j.UNDO){ia(jb,this.update);return;}var lb=ha(kb,jb);if(lb!==jb)this.update(lb);},onCharacterData:function(hb){var ib=x(hb),jb=this.props.editorState,kb=jb.getSelection(),lb=jb.getCurrentContent(),mb=l.decode(ib),nb=mb.blockKey,ob=jb.getBlockTree(nb),pb=ob.getIn([mb.decoratorKey,'leaves',mb.leafKey]),qb=lb.getBlockForKey(nb);if(qb.getText().slice(pb.start,pb.end)===hb.textContent)return;var rb=jb.getSelection().merge({anchorOffset:pb.start,focusOffset:pb.end,isBackward:false}),sb=k.replaceText(lb,rb,hb.textContent,qb.getInlineStyleAt(pb.start),null),tb=aa(this.props.editorState,this.refs.editorContainer.getDOMNode().firstChild),ub=sb.merge({selectionBefore:kb,selectionAfter:tb.selectionState});this.update(p.push(jb,ub,o.INSERT_CHARACTERS));},onDragStart:function(hb){this._internalDrag=true;this.setMode(r.DRAG);},onDragOver:function(hb){this._internalDrag=false;this.setMode(r.DRAG);hb.preventDefault();},onCompositionStart:function(hb){this.setRenderGuard();this.captureEditorDOM();this.setMode(r.COMPOSITE);this.update(p.set(this.props.editorState,{inCompositionMode:true}));},onCut:function(hb){var ib=this.props.editorState,jb=ib.getSelection();if(jb.isCollapsed()){hb.preventDefault();return;}this.setRenderGuard();this.captureEditorDOM();cb(ib,function(kb){this._clipboard=kb;this.setMode(r.CUT);setTimeout(function(){this.restoreEditorDOM();this.removeRenderGuard();this.exitCurrentMode();this.update(bb(ib));}.bind(this),0);}.bind(this));},onCopy:function(){cb(this.props.editorState,function(hb){this._clipboard=hb;}.bind(this));},onPaste:function(hb){hb.preventDefault();var ib=new h(hb.clipboardData);if(!ib.isRichText()){var jb=ib.getFiles(),kb=ib.getText();if(jb.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(jb))return;ba(jb,function(vb){vb=vb||kb;if(!vb)return;var wb=vb.split(da),xb=s.processTextAsImmutable(wb),yb=this.props.editorState,zb=w(xb),ac=k.replaceWithFragment(yb.getCurrentContent(),yb.getSelection(),zb);this.update(p.push(yb,ac,o.INSERT_FRAGMENT));}.bind(this));return;}}var lb,mb=ib.getText();if(mb)lb=mb.split(da);if(this._clipboard){var nb=lb.filter(za),ob=this._clipboard.toSeq().map(function(vb){return vb.getText();}).filter(za).toArray(),pb=v(nb,ob);if(pb){this.update(ab(this.props.editorState,this._clipboard));return;}}var qb=ib.getHTML();if(qb){var rb=s.processHTMLAsImmutable(qb,this.props.stripPastedStyles);if(rb){var sb=w(rb);this.update(ab(this.props.editorState,sb));return;}}this._clipboard=null;if(lb){var tb=s.processTextAsImmutable(lb),ub=w(tb);this.update(ab(this.props.editorState,ub));}}};function ha(hb,ib){switch(hb){case j.UNDO:return ia(ib);case j.REDO:return ja(ib);case j.DELETE:return ma(ib);case j.DELETE_WORD:return na(ib);case j.BACKSPACE:return qa(ib);case j.BACKSPACE_WORD:return ta(ib);case j.BACKSPACE_TO_END_OF_BLOCK:return ua(ib);case j.INSERT_BLOCK_DELIMITER:return va(ib);case j.TRANSPOSE_CHARACTERS:return wa(ib);case j.MOVE_SELECTION_TO_START_OF_BLOCK:return xa(ib);case j.MOVE_SELECTION_TO_END_OF_BLOCK:return ya(ib);case j.SECONDARY_CUT:return oa(ib);case j.SECONDARY_PASTE:return pa(ib);default:return ib;}}function ia(hb,ib){var jb=p.undo(hb);if(!hb.getNativelyRenderedContent()){ib(jb);return;}ib(p.set(hb,{nativelyRenderedContent:null}));setTimeout(function(){ib(jb);});}function ja(hb){return p.redo(hb);}function ka(hb,ib,jb,kb){var lb=k.replaceText(hb.getCurrentContent(),hb.getSelection(),ib,jb,kb||null);return p.push(hb,lb,o.INSERT_CHARACTERS);}function la(hb,ib,jb){var kb=hb.getSelection(),lb=hb.getCurrentContent(),mb=kb;if(kb.isCollapsed()){if(jb===n.FORWARD){if(hb.isAtDocumentEnd())return lb;}else if(hb.isAtDocumentStart())return lb;mb=ib(hb);if(mb===kb)return lb;}return k.removeRange(lb,mb,jb);}function ma(hb){var ib=la(hb,function(kb){var lb=kb.getSelection(),mb=kb.getCurrentContent(),nb=lb.getAnchorKey(),ob=lb.getAnchorOffset(),pb=mb.getBlockForKey(nb).getText()[ob];return sa(kb,pb?t.getUTF16Length(pb,0):1);},n.FORWARD);if(ib===hb.getCurrentContent())return hb;ib=ib.set('selectionBefore',hb.getSelection());var jb=hb.getSelection().isCollapsed()?o.DELETE_CHARACTER:o.REMOVE_RANGE;return p.push(hb,ib,jb);}function na(hb){var ib=la(hb,function(jb){var kb=jb.getSelection(),lb=kb.getStartOffset(),mb=kb.getStartKey(),nb=jb.getCurrentContent(),ob=nb.getBlockForKey(mb).getText().slice(lb),pb=m.getForward(ob)||'';return sa(jb,pb.length||1);},n.FORWARD);if(ib===hb.getCurrentContent())return hb;return p.push(hb,ib,o.REMOVE_RANGE);}function oa(hb){var ib=hb.getCurrentContent(),jb=hb.getSelection(),kb;if(jb.isCollapsed()){var lb=jb.getAnchorKey(),mb=ib.getBlockForKey(lb).getLength();if(mb===jb.getAnchorOffset())return hb;kb=jb.set('focusOffset',mb);}else kb=jb;fa=z(ib,kb);var nb=k.removeRange(ib,kb,n.FORWARD);if(nb===ib)return hb;return p.push(hb,nb,o.REMOVE_RANGE);}function pa(hb){return (fa?ab(hb,fa):hb);}function qa(hb){var ib=la(hb,function(kb){var lb=kb.getSelection(),mb=kb.getCurrentContent(),nb=lb.getAnchorKey(),ob=lb.getAnchorOffset(),pb=mb.getBlockForKey(nb).getText()[ob-1];return ra(kb,pb?t.getUTF16Length(pb,0):1);},n.BACKWARD);if(ib===hb.getCurrentContent())return hb;ib=ib.set('selectionBefore',hb.getSelection());var jb=hb.getSelection().isCollapsed()?o.BACKSPACE_CHARACTER:o.REMOVE_RANGE;return p.push(hb,ib,jb);}function ra(hb,ib){var jb=hb.getSelection(),kb=hb.getCurrentContent(),lb=jb.getStartKey(),mb=jb.getStartOffset(),nb=lb,ob;if(ib>mb){var pb=kb.getKeyBefore(lb);nb=pb;var qb=kb.getBlockForKey(pb);ob=qb.getText().length;}else ob=mb-ib;return jb.merge({focusKey:nb,focusOffset:ob,isBackward:true});}function sa(hb,ib){var jb=hb.getSelection(),kb=jb.getStartKey(),lb=jb.getStartOffset(),mb=hb.getCurrentContent(),nb=kb,ob,pb=mb.getBlockForKey(kb);if(ib>(pb.getText().length-lb)){nb=mb.getKeyAfter(kb);ob=0;}else ob=lb+ib;return jb.merge({focusKey:nb,focusOffset:ob});}function ta(hb){var ib=la(hb,function(jb){var kb=jb.getSelection(),lb=kb.getStartOffset();if(lb===0)return ra(jb,1);var mb=kb.getStartKey(),nb=jb.getCurrentContent(),ob=nb.getBlockForKey(mb).getText().slice(0,lb),pb=m.getBackward(ob)||'';return ra(jb,pb.length||1);},n.BACKWARD);if(ib===hb.getCurrentContent())return hb;return p.push(hb,ib,o.REMOVE_RANGE);}function ua(hb){var ib=la(hb,function(jb){var kb=jb.getSelection();if(kb.getStartOffset()===0)return ra(jb,1);return kb.merge({focusOffset:0,isBackward:true});},n.BACKWARD);if(ib===hb.getCurrentContent())return hb;return p.push(hb,ib,o.REMOVE_RANGE);}function va(hb){var ib=k.splitBlock(hb.getCurrentContent(),hb.getSelection());return p.push(hb,ib,o.SPLIT_BLOCK);}function wa(hb){var ib=hb.getSelection();if(!ib.isCollapsed())return hb;var jb=ib.getAnchorOffset();if(jb===0)return hb;var kb=ib.getAnchorKey(),lb=hb.getCurrentContent(),mb=lb.getBlockForKey(kb),nb=mb.getLength();if(nb<=1)return hb;var ob,pb;if(jb===nb){ob=ib.set('anchorOffset',jb-1);pb=ib;}else{ob=ib.set('focusOffset',jb+1);pb=ob.set('anchorOffset',jb+1);}var qb=z(lb,ob),rb=k.removeRange(lb,ob,n.BACKWARD),sb=rb.getSelectionAfter(),tb=sb.getAnchorOffset()-1,ub=sb.merge({anchorOffset:tb,focusOffset:tb}),vb=k.replaceWithFragment(rb,ub,qb),wb=p.push(hb,vb,o.INSERT_FRAGMENT);return p.acceptSelection(wb,pb);}function xa(hb){var ib=hb.getSelection(),jb=ib.getStartKey();return p.set(hb,{selection:ib.merge({anchorKey:jb,anchorOffset:0,focusKey:jb,focusOffset:0,isBackward:false}),forceSelection:true});}function ya(hb){var ib=hb.getSelection(),jb=ib.getEndKey(),kb=hb.getCurrentContent(),lb=kb.getBlockForKey(jb).getLength();return p.set(hb,{selection:ib.merge({anchorKey:jb,anchorOffset:lb,focusKey:jb,focusOffset:lb,isBackward:false}),forceSelection:true});}function za(hb){return hb.length>0;}function ab(hb,ib){var jb=k.replaceWithFragment(hb.getCurrentContent(),hb.getSelection(),ib);return p.push(hb,jb,o.INSERT_FRAGMENT);}function bb(hb){var ib=k.removeRange(hb.getCurrentContent(),hb.getSelection(),n.FORWARD);return p.push(hb,ib,o.REMOVE_RANGE);}function cb(hb,ib){var jb=hb.getSelection();if(!jb.isCollapsed())ib(z(hb.getCurrentContent(),jb));}var db='\'',eb='\/',fb=u.isBrowser('Firefox');function gb(hb){return (fb&&(hb==db||hb==eb));}e.exports=ga;},null);
__d("TextEditorDragHandler.Experimental",["DataTransfer","DocumentModifierExperimental","EditorState","EditorChangeType","ex","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(event,s){var t,u;if(document.caretRangeFromPoint){var v=document.caretRangeFromPoint(event.x,event.y);t=v.startContainer;u=v.startOffset;}else if(event.rangeParent){t=event.rangeParent;u=event.rangeOffset;}else return null;var w=l(t);if(w===null){var x='';if(t.dataset&&t.dataset.reactid)x=' Node ID: '+t.dataset.reactid;throw new Error(k('Invalid range for drop event.'+x+' Offset: '+u));}return n(s,w,u,w,u);}var p={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(s){var t=new g(s.nativeEvent.dataTransfer),u=this.props.editorState,v=o(s.nativeEvent,u);s.preventDefault();this.exitCurrentMode();if(v===null)return;var w=t.getFiles();if(w.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(v,w))return;m(w,function(x){x&&this.update(r(u,v,x));}.bind(this));return;}if(this._internalDrag){this.update(q(u,v));return;}this.update(r(u,v,t.getText()));}};function q(s,t){var u=h.moveText(s.getCurrentContent(),s.getSelection(),t);return i.push(s,u,j.INSERT_FRAGMENT);}function r(s,t,u){var v=h.insertText(s.getCurrentContent(),t,u,s.getCurrentInlineStyle());return i.push(s,v,j.INSERT_FRAGMENT);}e.exports=p;},null);
__d("UnicodeBidiService",["Locale","UnicodeBidi","UnicodeBidiDirection","invariant"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(l){if(!l)l=g.getDirection();j(i.isStrong(l));this.defaultDir=l;this.reset();}k.prototype.reset=function(){this.lastDir=this.defaultDir;};k.prototype.getDirection=function(l){this.lastDir=h.getDirection(l,this.lastDir);return this.lastDir;};e.exports=k;},null);
__d("AbstractTextEditor.Experimental.react",["AbstractTextEditorPlaceholder.Experimental.react","AbstractTextEditorProps.Experimental","DocumentOffsetKey","DOMVector","EditorState","ElementForBlockType","React","TextEditorBlock.Experimental.react","TextEditorCompositionHandler.Experimental","TextEditorEditHandler.Experimental","TextEditorDragHandler.Experimental","TextEditorModes","UnicodeBidiService","UserAgent","cx","extendArray","requestAnimationFrame","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";var y=a.MutationObserver||a.WebKitMutationObserver,z=(t.isBrowser('Safari')||t.isBrowser('Mobile Safari')),aa=!!y;function ba(fa){return function(ga){var ha=this._handler&&this._handler[fa];ha&&ha.call(this,ga);};}function ca(fa){switch(fa){case r.EDIT:return p;case r.COMPOSITE:return o;case r.DRAG:return q;case r.CUT:case r.RENDER:return null;}}var da=m.createClass({displayName:"AbstractTextEditor",getDefaultProps:h.getDefaultProps,_onBlur:ba('onBlur'),_onFocus:ba('onFocus'),_onSelect:ba('onSelect'),_onKeyDown:ba('onKeyDown'),_onKeyUp:ba('onKeyUp'),_onKeyPress:ba('onKeyPress'),_onMouseDown:ba('onMouseDown'),_onMouseUp:ba('onMouseUp'),_onCharacterData:ba('onCharacterData'),_onCompositionStart:ba('onCompositionStart'),_onCompositionEnd:ba('onCompositionEnd'),_onDragStart:ba('onDragStart'),_onDragOver:ba('onDragOver'),_onDragEnd:ba('onDragEnd'),_onDrop:ba('onDrop'),_onCut:ba('onCut'),_onCopy:ba('onCopy'),_onPaste:ba('onPaste'),_onBeforeInput:ba('onBeforeInput'),_renderContents:function(){var fa=this.props.editorState,ga=fa.getCurrentContent(),ha=fa.getSelection(),ia=fa.mustForceSelection(),ja=ga.getBlocksAsArray(),ka=[],la=null,ma=null,na,oa,pa,qa,ra,sa,ta,ua;for(var va=0;va<ja.length;va++){pa=ja[va];qa=pa.getKey();ra=pa.getText();sa=pa.getType();var wa=this.props.blockRendererFn(pa)||ea,xa=wa.component,ya=wa.props;na=xa;ta=m.createElement(na,{key:qa,tree:fa.getBlockTree(qa),decorator:fa.getDecorator(),block:pa,selection:ha,forceSelection:ia,direction:this._bidiService.getDirection(ra),blockProps:ya,blockStyleFn:this.props.blockStyleFn,inlineStyleFn:this.props.inlineStyleFn});ua=l.getWrapperElement(sa);if(ua){if(ma!==sa){oa=[];la=m.createElement(ua,{className:"_4noe",key:qa+'-wrap',"data-offset-key":i.encode(qa,0,0)},oa);ma=sa;ka.push(la);}oa.push(ta);}else{oa=null;la=null;ma=null;ka.push(ta);}}return ka;},_attachMutationObserver:function(){if(!y)return;var fa=[],ga=function(){if(fa.length>1){var ha=fa[0],ia=ha.target;x(function(){if(this.isMounted()&&ia.parentNode)this._onCharacterData(ia);}.bind(this));}fa.length=0;}.bind(this);this._mutationObserver=new y(function(ha){if(this._guardAgainstRender)return;if(z){if(fa.length===0)w(ga);v(fa,ha);}else{fa=ha;ga();}}.bind(this));this._mutationObserver.observe(this.refs.editorContainer.getDOMNode(),{characterDataOldValue:true,characterData:true,subtree:true});},_renderPlaceholder:function(){var fa=this.props.editorState.getCurrentContent(),ga=(this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!fa.hasText());if(ga)return (m.createElement(g,{text:this.props.placeholder,editorState:this.props.editorState,textAlignment:this.props.textAlignment}));},render:function(){var fa=this.props.textAlignment,ga=(("_5yw9")+(fa==='left'?' '+"_48yc":'')+(fa==='right'?' '+"_48yd":'')+(fa==='center'?' '+"_48ye":'')),ha=this.props.editorState.getCurrentContent().hasText();return (m.createElement("div",{className:ga},this._renderPlaceholder(),m.createElement("div",{className:"_5ywa",ref:"editorContainer"},m.createElement("div",{ref:"editor",title:ha?null:this.props.placeholder,role:this.props.role||"textbox","aria-activedescendant":this.props.ariaActiveDescendantID,"aria-autocomplete":this.props.ariaAutoComplete,"aria-expanded":this.props.ariaExpanded,"aria-owns":this.props.ariaOwneeID,"aria-haspopup":this.props.ariaHasPopup,className:"_54-z",onBlur:this._onBlur,onFocus:this._onFocus,onSelect:this._onSelect,onMouseUp:this._onMouseUp,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onKeyPress:this._onKeyPress,onCut:this._onCut,onCopy:this._onCopy,onPaste:this._onPaste,onDragStart:this._onDragStart,onDragOver:this._onDragOver,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onBeforeInput:this._onBeforeInput,spellCheck:aa&&this.props.spellCheck,contentEditable:true},this._renderContents()))));},focus:function(){var fa=this.props.editorState,ga=fa.getSelection().getHasFocus(),ha=j.getScrollPosition();this.refs.editor.getDOMNode().focus();window.scrollTo(ha.x,ha.y);if(ga)return;this.update(k.forceSelection(fa,fa.getSelection()));},blur:function(){this.refs.editor.getDOMNode().blur();},componentDidMount:function(){this._renderedVersion=null;this._clipboard=null;this._clonedEditor=null;this._guardAgainstRender=false;this._handler=p;this._attachMutationObserver();},shouldComponentUpdate:function(fa){if(fa.textAlignment!==this.props.textAlignment||fa.ariaExpanded!==this.props.ariaExpanded||fa.ariaActiveDescendantID!==this.props.ariaActiveDescendantID)return true;var ga=this.props.editorState,ha=fa.editorState,ia=ga.getSelection().getHasFocus(),ja=ha.getSelection().getHasFocus();if(ia!==ja)return true;var ka=ha.getNativelyRenderedContent(),la=ga.isInCompositionMode(),ma=ha.isInCompositionMode();if(ga===ha||(ka!==null&&ha.getCurrentContent()===ka)||(la&&ma))return false;var na=ga.getCurrentContent(),oa=ha.getCurrentContent(),pa=ga.getDecorator(),qa=ha.getDecorator();return (la!==ma||na!==oa||pa!==qa||ha.mustForceSelection());},componentWillUpdate:function(fa){this._blockSelectEvents=true;this._bidiService.reset();},componentDidUpdate:function(){this._blockSelectEvents=false;},componentWillMount:function(){this._bidiService=new s();},componentWillUnmount:function(){if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null;}},setMode:function(fa){this._handler=ca(fa);},exitCurrentMode:function(){this.setMode(r.EDIT);},captureEditorDOM:function(){this._clonedEditor=this.refs.editor.getDOMNode().cloneNode(true);},restoreEditorDOM:function(){var fa=this.refs.editorContainer.getDOMNode();fa.innerHTML='';fa.appendChild(this._clonedEditor);this.focus();this._clonedEditor=null;},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;},update:function(fa){this.props.onChange(fa);}}),ea={component:n,props:null};e.exports=da;},null);
__d("EmoticonSpan.react",["DocumentEntity","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k={smile:"_5uj7",frown:"_5uj8",tongue:"_5uj9",grin:"_5uja",gasp:"_5ujb",wink:"_5ujc",glasses:"_5ujd",sunglasses:"_5ujh",grumpy:"_5uji",unsure:"_5ujj",cry:"_5ujw",devil:"_5ujx",angel:"_5ujy",kiss:"_5ujz",heart:"_5uk7",kiki:"_5ukd",squint:"_5ukg",confused:"_5ukj",confused_rev:"_5ukl",upset:"_5ukp",pacman:"_5ukq",robot:"_5ukr",colonthree:"_5uks",penguin:"_5ukt",putnam:"_5uku",shark:"_5ukv",like:"_5ukw",poop:"_5ukx"},l=h.createClass({displayName:"EmoticonSpan",render:function(){var m=g.get(this.props.entityKey),n=m.getData().type,o=j("_1ty6",k[n]);return (h.createElement("span",{className:o,title:n,"data-offset-key":this.props.offsetKey},h.createElement("span",{className:"_5ukz"},this.props.children)));}});e.exports=l;},null);
__d("MentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"MentionSpan",render:function(){return (g.createElement("span",{"data-offset-key":this.props.offsetKey,className:"_5u8u",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("AbstractMentionsTextEditor.Experimental.react",["AbstractTextEditor.Experimental.react","AbstractTextEditorProps.Experimental","DocumentModifierExperimental","EditorChangeType","EditorState","React","TypeaheadNavigation","getOrCreateDOMID","setImmediate","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=l.PropTypes,r=5,s=l.createClass({displayName:"AbstractMentionsTextEditor",propTypes:Object.assign({},h.propTypes,{mentionsSource:q.object,mentionCreationFn:q.func.isRequired,mentionResultsComponent:q.func.isRequired,mentionResultsProps:q.object,excludedEntries:q.object,handleContentReturn:q.func,onAddMention:q.func,onShowMentions:q.func}),getDefaultProps:h.getDefaultProps,componentWillMount:function(){this._viewID=p();},getInitialState:function(){return {highlightedMentionable:null,ariaActiveDescendantID:null,mentionableEntries:null,characterOffset:0};},_onShowMentions:function(u,v){var w=u&&u.length;if(!w){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var x=u.slice(0,r),y=this.props.typeaheadViewProps;if(y&&y.mentionSortFn)x.sort(y.mentionSortFn);this.setState({highlightedMentionable:u[0],mentionableEntries:x,characterOffset:v});if(this.props.onShowMentions)this.props.onShowMentions(x,v);},_onBlur:function(u){this.setState(this.getInitialState());this.props.onBlur&&this.props.onBlur(u);},_onFocus:function(u){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(u);},_handleReturn:function(u){if(this.state.highlightedMentionable){this._onMentionSelect(this.state.highlightedMentionable,u);return true;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(u))return true;return false;},_onTab:function(u){if(this.state.highlightedMentionable){u.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,u);}else if(this.props.onTab)this.props.onTab(u);},_onEscape:function(u){if(this.props.onEscape)this.props.onEscape(u);if(this.state.mentionableEntries){u.stopPropagation();this.setState(this.getInitialState());}},_onUpArrow:function(u){if(this.state.mentionableEntries){u.preventDefault();m.moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(u);},_onDownArrow:function(u){if(this.state.mentionableEntries){u.preventDefault();m.moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(u);},_onMentionHighlight:function(u){this.setState({highlightedMentionable:u});},_onMentionRenderHighlight:function(u){var v=n(u);this.setState({ariaActiveDescendantID:v});},_onMentionSelect:function(u,v){var w=this.props.editorState,x=w.getSelection(),y=w.getCurrentContent(),z=x.getAnchorKey(),aa=x.getAnchorOffset(),ba=y.getBlockMap().get(z),ca=aa-t(ba.getText().substr(0,aa),u.getTitle(),this.state.characterOffset),da=i.replaceText(y,x.set('anchorOffset',ca),u.getTitle(),w.getCurrentInlineStyle(),this.props.mentionCreationFn(u)),ea=k.push(w,da,j.INSERT_FRAGMENT);this.props.onChange(ea);this.setState(this.getInitialState());if(this.props.onAddMention){var fa=this.state.mentionableEntries.indexOf(u);this.props.onAddMention(u,fa,v);}},shouldComponentUpdate:function(u,v){return (this.props.editorState!==u.editorState||this.state.mentionableEntries!==v.mentionableEntries||this.state.highlightedMentionable!==v.highlightedMentionable||this.state.ariaActiveDescendantID!==v.ariaActiveDescendantID);},componentDidUpdate:function(u){var v=this.props.editorState;if(v===u.editorState)return;var w=v.getSelection();if(w.getHasFocus()&&w.isCollapsed()){var x=v.getCurrentContent();if(this.props.mentionsSource)o(function(){this.props.mentionsSource.searchWithImmutables(x,w,this._onShowMentions);}.bind(this));}},blur:function(){this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor.focus();},_renderMentionables:function(){var u=this.state.mentionableEntries;if(!u||!u.length)return null;var v=this.props.mentionResultsComponent;return (l.createElement(v,l.__spread({},this.props.mentionResultsProps,{viewID:this._viewID,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:u||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this._onMentionSelect,onMentionHighlight:this._onMentionHighlight,onMentionRenderHighlight:this._onMentionRenderHighlight})));},render:function(){var u=this.state.mentionableEntries,v=!!(u&&u.length);return (l.createElement("div",{ref:"container",className:this.props.className,tabIndex:"-2"},l.createElement(g,l.__spread({},this.props,{ref:"abstractTextEditor",role:"combobox",ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:"list",ariaOwneeID:this._viewID,ariaExpanded:v,ariaHasPopup:v,onBlur:this._onBlur,onFocus:this._onFocus,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,handleReturn:this._handleReturn})),this._renderMentionables()));}});function t(u,v,w){for(var x=w;x<=v.length;x++)if(u.substr(-x)==v.substr(0,x))w=x;return w;}e.exports=s;},null);
__d("createMentionEntity",["ComposedEntityMutability","ComposedEntityType","DocumentEntity"],function(a,b,c,d,e,f,g,h,i){function j(k){var l=k.getType().toLowerCase()==='user'?g.SEGMENTED:g.IMMUTABLE,m=k.getAuxiliaryData();return i.create(h.MENTION,l,{id:k.getUniqueID(),isWeak:m&&m.renderType==='non_member'});}e.exports=j;},null);
__d("getVisibleValueForContentState",["ComposedEntityType","DocumentCharacters","DocumentEntity","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){var k=g.EMOTICON,l=h.SOFT_NEWLINE;function m(n){var o=n.getBlockMap().map(function(p){var q=p.getText(),r='';p.findEntityRanges(j.thatReturnsTrue,function(s,t){var u=p.getEntityAt(s);if(u===null){r+=q.slice(s,t);}else{var v=i.get(u);if(v.getType()===k){r+=v.getData().originalEmoticon;}else r+=q.slice(s,t);}});return r;});return o.join(l);}e.exports=m;},null);
__d("handleBeforeInputForEmoticon",["DocumentModifierExperimental","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){var k=new RegExp(/[\s'".,!?]/);function l(m,n){var o=m.getSelection();if(!o.isCollapsed()||!n||!k.test(n))return m;var p=m.getCurrentContent(),q=j(p,o);if(q===p)return m;var r=g.insertText(q,q.getSelectionAfter(),n);return i.push(m,r,h.INSERT_CHARACTERS);}e.exports=l;},null);
__d("handleSoftNewlineForEmoticon",["DocumentModifierExperimental","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){function k(l){var m=l.getCurrentContent(),n=l.getSelection(),o=j(m,n);if(o===m)return l;var p=g.splitBlock(o,o.getSelectionAfter());return i.push(l,p,h.SPLIT_BLOCK);}e.exports=k;},null);
__d("isSoftNewlineEvent",["Keys"],function(a,b,c,d,e,f,g){function h(i){return i.which===g.RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}e.exports=h;},null);
__d("StickerTriggerHighlightSpan.react",["EmoticonSpan.react","React","Toggler","cx"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=h.createClass({displayName:"StickerTriggerHighlightSpan",getInitialState:function(){return {activated:false};},propTypes:{offsetKey:h.PropTypes.string,searchTriggeredWord:h.PropTypes.func,stickersFlyoutToggler:h.PropTypes.object},componentDidMount:function(){this._togglerSub=i.listen('hide',this.props.stickersFlyoutToggler,function(){return this.isMounted()&&this.setState({activated:false});}.bind(this));},componentWillUnmount:function(){this._togglerSub&&this._togglerSub.unsubscribe();},_onClick:function(){if(this.state.activated)return;this.props.searchTriggeredWord();this.setState({activated:true});},render:function(){var l;if(this.props.entityKey){l=h.createElement(g,h.__spread({},this.props));}else l=this.props.children;return (h.createElement("span",{onClick:this._onClick,"data-offset-key":this.props.offsetKey,className:(("_29dt")+(this.state.activated?' '+"_1t57":'')),spellCheck:false},l));}});e.exports=k;},null);
__d("ChatInput.react",["AbstractMentionsTextEditor.Experimental.react","Bootloader","ChatConfig","ComposedEntityType","DocumentCompositeDecorator.Experimental","DocumentDecorator","DocumentModifierExperimental","EditorChangeType","EditorState","EmoticonSpan.react","MentionSpan.react","MentionsInputTypeaheadView.react","MentionsLayer.react","StickerTriggerHighlightSpan.react","React","createContentStateFromBlocks","createInitialEditorState","createMentionEntity","createPlainBlocksFromText","emptyFunction","getDefaultKeyBinding","getEntityMatcherExperimental","getVisibleValueForContentState","handleBeforeInputForEmoticon","handleSoftNewlineForEmoticon","insertEmoticonIntoContentState","isSoftNewlineEvent","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){"use strict";var ia=z.thatReturnsNull,ja=j.EMOTICON,ka=j.MENTION,la=' ',ma=u.createClass({displayName:"ChatInput",propTypes:{blockStyleFn:u.PropTypes.func,initializeThingsWithInputFn:u.PropTypes.func,inlineStyleFn:u.PropTypes.func,inputChanged:u.PropTypes.func,inputKeyDown:u.PropTypes.func,keyBindingFn:u.PropTypes.func,onAddMention:u.PropTypes.func,onBlur:u.PropTypes.func,onEscape:u.PropTypes.func,onFocus:u.PropTypes.func,onTab:u.PropTypes.func,resizeFn:u.PropTypes.func,searchTriggeredWord:u.PropTypes.func,stickersFlyoutToggler:u.PropTypes.object},getDefaultProps:function(){return {blockStyleFn:ia,inlineStyleFn:ia,keyBindingFn:aa};},componentDidMount:function(){this._oldHeight=this.getDOMNode().getBoundingClientRect().height;this.props.resizeFn(this._oldHeight);this.props.initializeThingsWithInputFn(this.refs.input.getDOMNode(),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});if(i.get('chat_mentions_entities'))h.loadModules(["AtSignMentionsStrategy","CurrentUser","DocumentCompositeMentionsSource","DocumentMentionsSource","SearchSourceWithMetrics","TypeaheadMetricReporter","URI","WebAsyncSearchSource"],function(na,oa,pa,qa,ra,sa,ta,ua){var va=new sa({event_name:'chat_mentions_entities'}),wa=new ra(new ua({queryRequests:[{uri:ta('/ajax/typeahead/search.php'),data:{viewer:oa.getID(),filter:i.get('chat_mentions_types')}}],bootstrapRequests:[{uri:ta('/ajax/typeahead/first_degree.php'),data:{viewer:oa.getID(),filter:i.get('chat_mentions_types')}}]}),va),xa=new pa([new qa(na,wa)]);xa.bootstrap();va.sessionStart();this.setState({mentionsSource:xa,typeaheadReporter:va});}.bind(this));},componentWillReceiveProps:function(na){if(this.state.triggeredWord!==na.triggeredWord)this.setState({triggeredWord:na.triggeredWord},this._updateDecorator);},componentDidUpdate:function(){ha(function(){var na=this.getDOMNode().getBoundingClientRect().height;if(this._oldHeight!==na)this.props.resizeFn(na);this._oldHeight=na;}.bind(this));},getInitialState:function(){return {editorState:this._createEmptyEditorState()};},_createEmptyEditorState:function(){var na=y(['']);return w(v(na),this._getStickerTagDecorator());},resetState:function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart();}this.setState({editorState:o.moveFocusToEnd(this._createEmptyEditorState()),triggeredWord:null});},_updateDecorator:function(){var na=this._getStickerTagDecorator();ha(function(){var oa=o.set(this.state.editorState,{decorator:na});this.setState({editorState:oa});}.bind(this));},_getStickerTagDecorator:function(){var na=this.state&&this.state.triggeredWord,oa=function(qa,ra){if(!na)return;var sa,ta,ua;if(na.match(/\W/)){ua=new RegExp(na.replace(/(\W)/g,'\\$1'),'gi');}else ua=new RegExp('\\b'+na+'\\b','gi');while((sa=ua.exec(qa.getText()))!==null){ta=sa.index;ra(ta,ta+na.length);}},pa={stickersFlyoutToggler:this.props.stickersFlyoutToggler,searchTriggeredWord:this.props.searchTriggeredWord};return new k([new l(oa,t,pa),new l(ba(function(qa){return (qa.getType()===ja&&qa.getData().originalEmoticon===na);}),t,pa),new l(ba(function(qa){return qa.getType()===ja;}),p),new l(ba(function(qa){return qa.getType()===ka;}),q)]);},onChange:function(na){if(na.getCurrentContent()!==this.state.editorState.getCurrentContent())this.props.inputChanged(this.getValueFromEditorState(na));this.setState({editorState:na});},onReturn:function(event){if(ga(event)){var na=ea(this.state.editorState);if(na===this.state.editorState)return false;this.setState({editorState:na});return true;}this.props.inputKeyDown(event,this.getValue());this.resetState();return true;},_onAddMention:function(na){if(this.state.typeaheadReporter)this.state.typeaheadReporter.reportSelect(na.getUniqueID(),na.getType(),0,false);this.props.onAddMention&&this.props.onAddMention(na);},_onShowMentions:function(na,oa){this.state.typeaheadReporter&&this.state.typeaheadReporter.reportResults(na.map(function(pa){return pa.getUniqueID();}));},getValueFromEditorState:function(na){var oa=na.getCurrentContent();return ca(oa);},getValue:function(){return this.getValueFromEditorState(this.state.editorState);},focus:function(){this.refs.input.focus();},_handleBeforeInput:function(na){var oa=da(this.state.editorState,na);if(oa===this.state.editorState)return false;this.setState({editorState:oa});return true;},_handleFiles:function(na){var oa=/^image\//,pa=na.filter(function(qa){return oa.test(qa.type);});if(pa.length){this.props.uploadPhotoFn(pa[0]);return true;}return false;},_handlePastedFiles:function(na){return this._handleFiles(na);},_handleDroppedFiles:function(na,oa){return this._handleFiles(oa);},insertEmoticon:function(na){var oa=this.state.editorState,pa=oa.getSelection(),qa=oa.getCurrentContent(),ra=pa.getStartOffset(),sa=pa.getEndOffset(),ta=qa.getBlockForKey(pa.getStartKey()).getText(),ua=qa.getBlockForKey(pa.getEndKey()).getText(),va='';if(sa<=ua.length&&ua[sa]!==la)va=la;if(ra>0&&ta[ra-1]!==la){qa=m.insertText(qa,pa,la);pa=qa.getSelectionAfter();}var wa=fa(na,qa,pa);qa=m.insertText(wa,wa.getSelectionAfter(),va);oa=o.push(oa,qa,n.INSERT_CHARACTERS);if(oa!==this.state.editorState)this.setState({editorState:oa});},appendText:function(na){var oa=this.state.editorState,pa=oa.getSelection(),qa=oa.getCurrentContent();qa=m.insertText(qa,pa,na);oa=o.push(oa,qa,n.INSERT_CHARACTERS);this.setState({editorState:oa});},render:function(){return (u.createElement(g,u.__spread({ref:"input"},this.props,{editorState:this.state.editorState,onChange:this.onChange,onAddMention:this._onAddMention,onShowMentions:this._onShowMentions,handleBeforeInput:this._handleBeforeInput,handlePastedFiles:this._handlePastedFiles,handleDroppedFiles:this._handleDroppedFiles,handleContentReturn:this.onReturn,spellCheck:true,mentionCreationFn:x,mentionResultsComponent:s,mentionResultsProps:{typeaheadView:r,autoflip:true},mentionsSource:this.state.mentionsSource})));}});e.exports=ma;},null);